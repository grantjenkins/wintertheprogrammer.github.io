<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>New webpage</title>
    </head>
    <body>
        <canvas id="mycanvas"></canvas> 
    </body>
    <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
    <script>
      var programCode = function(processingInstance) {
        with (processingInstance) {
          size(400, 400); 
          frameRate(60);

          // Paste code from Khan Academy here:
          var scene = "home";

var clicked = false;

var currentAvatar = "seed";

var c = [color(133, 29, 0), color(184, 31, 0), color(212, 74, 0), color(184, 37, 0), color(184, 64, 0), color(212, 92, 0), color(212, 85, 0)];

var seed = function(x, y, s){
    pushMatrix();
    translate(x, y);
    scale(s);
    noStroke();
    fill(c[0]);
    ellipse(48,57,75,75);
    fill(c[2]);
    ellipse(45,55,71,67);
    fill(c[1]);
    triangle(21,30,71,27,42,8);
    fill(c[2]);
    triangle(21,31,67,28,42,8);
    fill(51, 76, 125);
    arc(58,68,12,12,-28,154);
    arc(32,68,12,12,31,207);
    fill(140, 140, 140);
    ellipse(57,71,3,3);
    ellipse(33,71,3,3);
    popMatrix();
};
var sd = get(0, 0, width, height);
            
var seedling = function(x, y, s){
    noStroke();
    pushMatrix();
    translate(x, y);
    scale(s);
    fill(c[0]);
    beginShape();
    vertex(203,79);
    vertex(98,8);
    curveVertex(85,79);
    vertex(36,117);
    endShape(CLOSE);
    triangle(99,8,32,126,40,65);
    ellipse(46,149,65,65);
    fill(c[1]);
    beginShape();
    vertex(48,136);
    vertex(101,9);
    curveVertex(39,50);
    curveVertex(26,100);
    vertex(36,121);
    curveVertex(50,76);
    vertex(101,9);
    endShape(CLOSE);
    ellipse(43,146,60,60);
    fill(0, 67, 125);
    arc(52,158,12,12,-28,154);
    arc(29,158,12,12,31,207);
    fill(140, 140, 140);
    ellipse(30,161,3,3);
    ellipse(51,161,3,3);
    fill(c[4]);
    beginShape();
    curveVertex(-69,199);
    curveVertex(62,188);
    curveVertex(74,170);
    curveVertex(55,187);
    curveVertex(103,279);
    endShape();
    ellipse(24,184,24,12);
    fill(c[3]);
    ellipse(24,186,24,10);
    beginShape();
    curveVertex(-42,199);
    curveVertex(62,187);
    curveVertex(74,175);
    curveVertex(59,178);
    curveVertex(56,187);
    curveVertex(103,279);
    endShape();
    popMatrix();
};
var sdling = get(0, 0, width, height);            
            
var sapling = function(x, y, s){
     pushMatrix();
    translate(x, y);
    scale(s);
    noStroke();
    fill(c[0]);
    beginShape();
    vertex(130, 120);
    bezierVertex(71, 74, 157, 164, 37, 159);
    bezierVertex(130, 146, -98, 65, 97, 89);
    endShape();
    fill(c[1]);
    beginShape();
    vertex(121, 113);
    bezierVertex(63, 70, 155, 155, 44, 159);
    bezierVertex(137, 144, -88, 65, 97, 91);
    endShape();
    translate(-8,-188);
    fill(c[4]);
    ellipse(68,257,75,75);
    fill(c[2]);
    ellipse(65,256,70,70);
    triangle(38,276,99,269,68,305);
    
    fill(0, 67, 125);
    arc(78,268,12,12,-28,154);
    arc(52,268,12,12,31,207);
    fill(140, 140, 140);
    ellipse(77,271,3,3);
    ellipse(53,271,3,3);
    
    popMatrix();
};
var sap = get(0, 0, width, height);
            
var tree = function(x, y, s){
    pushMatrix();
    translate(x, y);
    scale(s);
    noStroke();
    fill(c[0]);
    beginShape();
    vertex(270, 120);
    bezierVertex(154, 119, 248, 204, 175, 233);
    bezierVertex(254, 146, 42, 67, 233, 89);
    endShape();
    fill(c[1]);
    beginShape();
    vertex(270, 120);
    bezierVertex(210, 65, 245, 198, 175, 233);
    bezierVertex(260, 146, 42, 67, 233, 89);
    endShape(); 
    translate(130,-189);
    fill(c[4]);
    ellipse(68,257,75,75);
    fill(c[2]);
    ellipse(65,256,70,70);
    triangle(38,276,99,269,68,305);
    fill(0, 67, 125);
    arc(78,268,12,12,-28,154);
    arc(52,268,12,12,31,207);
    fill(138, 138, 138);
    ellipse(77,271,3,3);
    ellipse(53,271,3,3);
    fill(c[3]);
    beginShape();
    vertex(113, 287);
    bezierVertex(134, 194, 224, 249, 253, 268);
    bezierVertex(189, 194, 94, 150, 99, 281);
    endShape();
    beginShape();
    translate(-77,-2);
    vertex(116, 282);
    bezierVertex(76, 134, -11, 250, -37, 271);
    bezierVertex(101, 201, 65, 289, 124, 302);
    endShape();
    
    popMatrix();
};
var tr = get(0, 0, width, height);
            
var ultimate = function(x, y, s){
    pushMatrix();
    translate(x, y);
    scale(s);
    
    pushMatrix();
    translate(-70, -13);
    fill(c[0]);
    noStroke();
    //horns for final avatar
    triangle(233,65,250,62,234,25);
    triangle(299,67,280,62,287,25);
    noFill();
    stroke(184, 0, 0);
    strokeWeight(3);
    arc(261,26,57,9,-194,12);
    noStroke();
    fill(c[1]);
    triangle(236,65,246,62,236,36);
    triangle(295,67,284,62,287,34);
    popMatrix();
    
    noStroke();
    translate(140, 0);
    fill(c[2]);
    beginShape();
    vertex(130, 120);
    bezierVertex(84, 79, 108, 204, 35, 233);
    bezierVertex(114, 146, -98, 67, 93, 89);
    endShape();
    
    fill(c[3]);
    beginShape();
    vertex(130, 120);
    bezierVertex(72, 65, 105, 198, 35, 233);
    bezierVertex(130, 146, -98, 67, 93, 89);
    endShape(); 
    translate(-10,-189);
    fill(c[4]);
    ellipse(68,257,75,75);
    
    
    fill(c[5]);
    ellipse(65,256,70,70);
    triangle(38,276,99,269,68,305);
    fill(0, 67, 125);
    arc(78,268,12,12,-28,154);
    arc(52,268,12,12,31,207);
    fill(138, 138, 138);
    ellipse(77,271,3,3);
    ellipse(53,271,3,3);
    fill(c[3]);
    beginShape();
    vertex(113, 287);
    bezierVertex(134, 194, 224, 249, 253, 268);
    bezierVertex(189, 194, 94, 150, 99, 281);
    endShape();
    beginShape();
    translate(-75,0);
    vertex(116, 282);
    bezierVertex(76, 134, -11, 250, -37, 271);
    bezierVertex(101, 201, 65, 289, 124, 302);
    endShape();
    fill(c[6]);
    translate(76,-1);
    beginShape();
    vertex(109, 286);
    bezierVertex(125, 181, 230, 245, 248, 268);
    bezierVertex(198, 206, 97, 154, 101, 281);
    endShape();
    beginShape();
    translate(-75,0);
    vertex(106, 279);
    bezierVertex(74, 146, -5, 250, -37, 271);
    bezierVertex(96, 190, 75, 279, 100, 282);
    endShape();
    popMatrix();
};
var ult = get(0, 0, width, height);
            
var drawAvatar = function(level, x, y, s){
  if (level === "seed" || level === 0) {
      image(sd, x, y, s, s);
  } else if (level === "seedling" || level === 1) {
      image(sdling, x, y, s, s);
  } else if (level === "sapling" || level === 2) {
       image(sap, x, y, s, s);
  } else if (level === "tree" || level === 3) {
       image(tr, x, y, s, s);
  } else if (level === "ultimate" || level === 4) {
       image(ult, x, y, s, s);
  } else {
    
  }
};

var CircleButton = function(x, y, s, txt, txts, sceneSwitch){
    this.x = x;
    this.y = y;
    this.s = s;
    this.txt = txt;
    this.txts = txts;
    this.sceneSwitch = sceneSwitch;
};

CircleButton.prototype.display = function() {
    fill(255, 94, 0);
    if(dist(mouseX, mouseY, this.x, this.y) < this.s/2){
        fill(255, 150, 0);
        this.s+=15;
        this.txts+=5;
        cursor("pointer");
    }
    noStroke();
    ellipse(this.x, this.y, this.s, this.s);
    fill(255, 200, 0);
    textSize(this.txts);
    textAlign(CENTER, CENTER);
    text(this.txt, this.x, this.y);
};

CircleButton.prototype.whenClicked = function() {
    if(clicked && (dist(mouseX, mouseY, this.x, this.y) < this.s/2)){
        scene = this.sceneSwitch;
    }
};

var RectButton = function(x, y, w, h, txt, txts, sceneSwitch, type){
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.txt = txt;
    this.txts = txts;
    this.sceneSwitch = sceneSwitch;
    this.type = type;
};

RectButton.prototype.display = function(){
    fill(255, 94, 0);
    if(mouseX >= this.x && mouseX <= this.x + this.w && mouseY >= this.y && mouseY <= this.y + this.h){
        fill(255, 100, 50);
        cursor("pointer");
    }
    rectMode(CORNER);
    noStroke();
    rect(this.x, this.y, this.w, this.h);
    fill(255, 200, 50);
    textSize(this.txts);
    textAlign(CENTER, CENTER);
    text(this.txt, this.x+this.w/2, this.y+this.h/2);
};

var w = 1;

function updateStats(){
    if(w>=50&&w <= 110){
        currentAvatar = "seedling";   
    } else if(w>110&&w<=170){
        currentAvatar = "sapling";   
    } else if(w>170&&w<=240){
        currentAvatar = "tree";   
    } else if(w>240&&w<=270){
        currentAvatar = "ultimate";
    } else if(w>270){
        scene = "win";
    }
    drawAvatar(currentAvatar, 210, 160, 0.5);
}

var exerciseGainingAmount = 0.8;
var feedGainingAmount = 1;
var drinkGainingAmount = 1.3;
var restGainingAmount = 0.6;
var playGainingAmount = 0.9;

RectButton.prototype.whenClicked = function(){
    if(clicked && mouseX >= this.x && mouseX <= this.x + this.w && mouseY >= this.y && mouseY <= this.y + this.h){
        updateStats();
        if(this.type === "exercise"){
            w+=exerciseGainingAmount;
        } else if(this.type === "feed"){
            w+=feedGainingAmount;   
        } else if(this.type === "drink"){
            w+=drinkGainingAmount;
        } else if(this.type === "rest"){
            w+=restGainingAmount;
        } else if(this.type === "play"){
            w+=playGainingAmount;
        } else if(this.type === "excercizeShop" && w>=50){
            exerciseGainingAmount+=1;
            w-=50;
        } else if(this.type === "feedShop" && w>=60){
            feedGainingAmount+=1;
            w-=60;
        } else if(this.type === "drinkShop" && w>=70){
            drinkGainingAmount+=1;
            w-=70;
        } else if(this.type === "restShop" && w>=80){
            restGainingAmount+=1;
            w-=80;
        } else if(this.type === "playShop" && w>=90){
            playGainingAmount+=1;
            w-=90;
        }
    }
};

var drawSceneHome = function(){
    background(255, 200, 0);
    for(var c = 0;c<=255;c++){
        pushMatrix();
        translate(200,200);
        for(var rot = 0;rot<360;rot+=30){
            rotate(rot+frameCount/2);
            fill(c,c*0.75,0);
            rect(c,0,c,200);    
            rect(0,c,200,c);  
            rotate(180);
            rect(c,0,c,200);    
            rect(0,c,200,c); 
        }
        popMatrix();
    } 
    textSize(30);
    textAlign(CENTER, CENTER);
    textFont(createFont("Skia"));
    fill(0);
    text("Growing Up With Vortan", 201, 100);
    text("Growing Up With Vortan", 199, 100);
    text("Growing Up With Vortan", 200, 99);
    text("Growing Up With Vortan", 200, 101);
    fill(200, 100, 0);
    text("Growing Up With Vortan", 200, 100);
    
    textSize(17);
    fill(0);
    text("Created by: Winter", 201, 160);
    text("Created by: Winter", 199, 160);
    text("Created by: Winter", 200, 159);
    text("Created by: Winter", 200, 161);
    fill(255, 100, 0);
    text("Created by: Winter", 200, 160);
    //rect(222, 150, 50, 20);
    if(clicked && mouseX >= 222 && mouseX <= 272 && mouseY >= 150 && mouseY <= 170){
        println("https://www.khanacademy.org/computer-programming/winters-subpage-updated/6421448071004160");
    }
    if(mouseX >= 222 && mouseX <= 272 && mouseY >= 150 && mouseY <= 170){
        cursor("pointer");
    }
    var playButton = new CircleButton(200, 250, 75, "Play", 23, "play");
    playButton.display();
    playButton.whenClicked();
    var howButton = new CircleButton(100, 300, 100, "How", 30, "how");
    howButton.display();
    howButton.whenClicked();
    var shopButton = new CircleButton(300, 300, 100, "Shop", 30, "shop");
    shopButton.display();
    shopButton.whenClicked();
};

var x1 = 50, x2 = 350, s = 0;

var drawSceneWin = function(){
    background(255, 200, 0);
    textAlign(CENTER, CENTER);
    textSize(50);
    fill(255, 100, 0);
    text("You Win!!!".substring(s, 0), 200, 150);
    s+=0.075;
    var menuButton = new CircleButton(200, 275, 75, "Menu", 23, "home");
    menuButton.display();
    menuButton.whenClicked();
};

var drawSceneHow = function(){
    background(255, 200, 0);
    for(var i = 255+frameCount;i>0;i--){
        fill(i,i/2,0);
        rectMode(CENTER);
        pushMatrix();
        translate(200,200);
        rotate(i+frameCount);
        rect(0,0,i,i);
        popMatrix();
    }    
    textAlign(CENTER, CENTER);
    textSize(35);
    fill(0);
    text("How", 201, 100);
    text("How", 199, 100);
    text("How", 200, 101);
    text("How", 200, 99);
    fill(200, 100, 0);
    text("How", 200, 100);
    stroke(200, 50, 0);
    strokeWeight(3);
    line(x1, 150, x2, 150);
    x1+=random(-2.5, 2.5);
    x2+=random(-2.5, 2.5);
    textSize(20);
    fill(0,0,0);
    text("Just click the buttons to\nmake little Vortan turn into big Vortan!", 201, 200);
    text("Just click the buttons to\nmake little Vortan turn into big Vortan!", 199, 200);
    text("Just click the buttons to\nmake little Vortan turn into big Vortan!", 200, 201);
    text("Just click the buttons to\nmake little Vortan turn into big Vortan!", 200, 199);
    fill(200, 50, 0);
    text("Just click the buttons to\nmake little Vortan turn into big Vortan!", 200, 200);
    var menuButton = new CircleButton(200, 300, 75, "Menu", 23, "home");
    menuButton.display();
    menuButton.whenClicked();
};

var drawScenePlay = function(){
    background(255, 200, 0);
    fill(255, 255, 0);
    rect(50, 50, w, 10);
    var exerciseButton = new RectButton(50, 100, 100, 40, "Exercise", 20, "none", "exercise");
    exerciseButton.display();
    exerciseButton.whenClicked();
    
    var feedButton = new RectButton(50, 150, 100, 40, "Feed", 20, "none", "feed");
    feedButton.display();
    feedButton.whenClicked();
    
    var drinkButton = new RectButton(50, 200, 100, 40, "Drink", 20, "none", "drink");
    drinkButton.display();
    drinkButton.whenClicked();
    
    var restButton = new RectButton(50, 250, 100, 40, "Rest", 20, "none", "rest");
    restButton.display();
    restButton.whenClicked();
    
    var playButton = new RectButton(50, 300, 100, 40, "Play", 20, "none", "play");
    playButton.display();
    playButton.whenClicked();
    
    updateStats();
    textAlign(CENTER, CENTER);
    textSize(15);
    fill(255, 0, 0);
    text("W: "+w+"\nCurrent: "+currentAvatar, 300, 25);
    
    var menuButton = new CircleButton(340, 340, 75, "Menu", 23, "home");
    menuButton.display();
    menuButton.whenClicked();
};

var drawSceneShop = function(){
    background(255, 200, 0);
    for(var i = 200;i<400;i++){
                        fill(i, i/2, 0);
                        pushMatrix();
                        translate(200,200);
                        rotate(i*frameCount/100);
                        ellipse(i-200,i-200,i-200,i-200);
                        popMatrix();    
                        
    }    
    textAlign(CENTER, CENTER);
    textSize(35);
    fill(200, 100, 0);
    text("Shop", 200, 100);
    strokeWeight(3);
    stroke(200, 50, 0);
    line(x1, 150, x2, 150);
    x1+=random(-2.5, 2.5);
    x2+=random(-2.5, 2.5);
    textSize(15);
    fill(255, 50, 0);
    text("Money: "+w, 300, 200);
    var exerciseShopButton = new RectButton(125, 175, 100, 40, "Exercise+1\nCost: 50", 15, "none", "excercizeShop");
    exerciseShopButton.display();
    exerciseShopButton.whenClicked();
    
    var feedShopButton = new RectButton(50, 225, 100, 40, "Feed+1\nCost: 60", 15, "none", "feedShop");
    feedShopButton.display();
    feedShopButton.whenClicked();
    
    var drinkShopButton = new RectButton(50, 275, 100, 40, "Drink+1\nCost: 70", 15, "none", "drinkShop");
    drinkShopButton.display();
    drinkShopButton.whenClicked();
    
    var restShopButton = new RectButton(126, 325, 100, 40, "Rest+1\nCost: 80", 15, "none", "restShop");
    restShopButton.display();
    restShopButton.whenClicked();
    
    var playShopButton = new RectButton(160, 250, 100, 40, "Play+1\nCost: 90", 15, "none", "playShop");
    playShopButton.display();
    playShopButton.whenClicked();
    
    var menuButton = new CircleButton(340, 340, 75, "Menu", 23, "home");
    menuButton.display();
    menuButton.whenClicked();
};

var setKALoopTimer = function() {
    this[['KAInfiniteLoopSetTimeout']](1000);
};

draw = function() {
    cursor("default");
    switch(scene) {
    case "home":
        drawSceneHome();
    break;
    case "how":
        drawSceneHow();
    break;
    case "play":
        drawScenePlay();
    break;
    case "shop":
        drawSceneShop();
    break;
    case "win":
        drawSceneWin();
    break;
    }
    clicked = false;
    setKALoopTimer();
};

mouseClicked = function() {
    clicked = true;
};

        }};

      // Get the canvas that ProcessingJS will use
      var canvas = document.getElementById("mycanvas"); 
      // Pass the function to ProcessingJS constructor
      var processingInstance = new Processing(canvas, programCode); 
    </script>
</html>
